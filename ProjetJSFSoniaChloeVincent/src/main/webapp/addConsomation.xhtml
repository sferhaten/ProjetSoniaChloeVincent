<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>

	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Insert title here</title>


	<h:outputStylesheet name="css/bootstrap.css" rel="stylesheet" />

	<h:outputStylesheet name="css/datepicker3.css" rel="stylesheet" />
	<h:outputStylesheet name="css/styles.css" rel="stylesheet" />

</h:head>
<body>

<ui:include src="home.xhtml" />
<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
		<h1 class="text-center">Ajouter une consomation pour un client</h1>
		<br />

		<h:messages style="prenom:red"></h:messages>



		<h:form id="form">
			<p:dataTable id="radioDT" paginator="true" rows="5"
				value="#{addConsomationBean.produitsDispo}"
				selection="#{addConsomationBean.selectedidProduit}"
				rowKey="#{P.idProduit}" var="P" editable="true">

				<f:facet name="header">Stock Produit disponible dans l'hotel</f:facet>
				<p:ajax event="rowEdit" listener="#{addConsomationBean.onRowEdit}" />
				<p:ajax event="rowEditCancel"
					listener="#{addConsomationBean.onRowCancel}" />

				<p:column selectionMode="single"
					style="width:50px;text-align:center" />
				<p:column headerText="Identifiant">
					<h:outputText value="#{P.idProduit}"></h:outputText>
				</p:column>

				<p:column headerText="Nom">
					<h:outputText value="#{P.nom}"></h:outputText>
				</p:column>

				<p:column headerText="Quantite">
					<h:outputText value="#{P.quantite}"></h:outputText>
				</p:column>

				<p:column headerText="Coût Achat">
					<h:outputText value="#{P.coutAchat}"></h:outputText>
				</p:column>
				<p:column headerText="Coût Vente">
					<h:outputText value="#{P.coutVente}"></h:outputText>
				</p:column>




			</p:dataTable>

		
		<br />

	
			<p:panel id="panel" header="Choix de la quantite">

				<p:messages id="msgs" />

				<h:panelGrid columns="3" cellpadding="5">
					<p:outputLabel for="quantiteConsomation" value="Quantite consomation:" />
					<p:inputText id="quantiteConsomation" value="#{addConsomationBean.quantiteConsomation}"
						required="true" >
						<f:validateLength minimum="1" />
					</p:inputText>
					
					</h:panelGrid>
					</p:panel><br/>
				<h:column style="width:100px">	
			<h:commandButton process="radioDT" value="Save" action="#{addConsomationBean.addConsomation}" update=":form:radioDT,:consomation:tbl">
			
		
			</h:commandButton>
			
			<br/>
			</h:column>
		</h:form>
		<p:panel id="panel" header="le cout">

			<p:messages id="msgs" />

			<h:panelGrid columns="3" cellpadding="5">
				<p:outputLabel for="coutClient" value="cout de la consomation:" />
				<p:inputText id="coutClient"
					value="#{addConsomationBean.coutClient}" required="true">
					<f:validateLength minimum="2" />
				</p:inputText>
			</h:panelGrid>
		</p:panel>

		<h:form id="consomation">
	  		<p:dataTable id="tbl" paginator="true" rows="5" value="#{consomationBean.consomations}" var="C">
	       
	       		<f:facet name="header">Liste Consomations</f:facet>
		      	<p:column headerText="IdentifiantProduit">
		        	<h:outputText value="#{consomationBean.idProduit}"></h:outputText>
		       	</p:column>
		       	
		       <p:column headerText="Quantite consomee">
		       		<h:outputText value="#{C.quantiteConsomation}"></h:outputText>
		       </p:column>
		      
				<p:column headerText="Cout consomation">
		       		<h:outputText value="#{consomationBean.coutClient}"></h:outputText>
		       </p:column>
	   		</p:dataTable>
	   		
	  </h:form>
				
	</div>

	<h:outputScript name="js/jquery-1.11.1.min.js"></h:outputScript>
	<h:outputScript name="js/bootstrap.min.js"></h:outputScript>
	<h:outputScript name="js/chart.min.js"></h:outputScript>
	<h:outputScript name="js/chart-data.js"></h:outputScript>
	<h:outputScript name="js/easypiechart.js"></h:outputScript>
	<h:outputScript name="js/easypiechart-data.js"></h:outputScript>
	<h:outputScript name="js/bootstrap-datepicker.js"></h:outputScript>


	<h:outputScript name="js/lumino.glyphs.js" />

</body>
</html>