<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<h:head>

	<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Insert title here</title>


	<h:outputStylesheet name="css/bootstrap.css" rel="stylesheet" />

	<h:outputStylesheet name="css/datepicker3.css" rel="stylesheet" />
	<h:outputStylesheet name="css/styles.css" rel="stylesheet" />

</h:head>
<body>
<ui:include src="home.xhtml" />

	<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">

		

		<h1 class="text-center">Réservations du client Toto</h1>
		<br />

		<h:messages style="prenom:red"></h:messages>



		<h:form id="form">

			<p:panel id="panel" header="Ajouter une nouvelle réservation">
				<p:messages id="msgs" />
				<h:panelGrid columns="3" cellpadding="5">

					<p:outputLabel for="dateArrive" value="Date d'arrivée :" />
					<p:calendar id="dateArrive" value="#{reservationBean.dateArrive}"
						required="true" label="Date d'arrivée"
						mindate="#{reservationBean.dateMinimum}">
						<p:ajax render="dateSortie" event="dateSelect"
							listener="#{reservationBean.setd1}"></p:ajax>
					</p:calendar>
					<br />

					<p:outputLabel for="dateSortie" value="Date de sortie :" />
					<p:calendar id="dateSortie" value="#{reservationBean.dateSortie}"
						required="true" label="Date de sortie"
						mindate="#{reservationBean.dateArrive}">
						<p:ajax event="dateSelect" listener="#{reservationBean.setd2}"></p:ajax>
					</p:calendar>
					<br />

					<p:outputLabel for="typeChambre" value="Type de chambre :" />
					<p:selectOneMenu id="typeChambre"
						value="#{reservationBean.typeChambre}" style="width:200px"
						required="true">
						<f:selectItem itemLabel="Select un type" itemValue="#{null}"
							noSelectionOption="true" />
						<f:selectItem itemLabel="Chambre simple" itemValue="ChambreSimple" />
						<f:selectItem itemLabel="Chambre double" itemValue="ChambreDouble" />
						<f:selectItem itemLabel="Suite" itemValue="Suite" />
						<f:ajax render="idChambre"
							listener="#{reservationBean.getChambresDispos}"></f:ajax>
					</p:selectOneMenu>
					<br />

					<p:outputLabel id="idChambreLabel" for="idChambre"
						value="Numéro de chambre :" style="display:block" />
					<h:selectOneMenu id="idChambre"
						value="#{reservationBean.idChambre}" required="true"
						style="width:200px; display:block">
						<f:selectItems value="#{reservationBean.listeChambres}" var="ch"
							itemValue="#{ch.idChambre}" itemLabel="#{ch.numChambre}" />
					</h:selectOneMenu>
					<br />

				</h:panelGrid>


				<p:commandButton value="Réserver"
					actionListener="#{reservationBean.add}" icon="ui-icon-check" />


			</p:panel>
		</h:form>
		<br />



		<h:form id="form2">
			<p:dataTable paginator="true" rows="5"
				value="#{reservationBean.listeReservations}" var="r"
				sortMode="multiple">

				<f:facet name="header">Réservations</f:facet>

				<p:column sortBy="#{r.idReservation}" headerText="Identifiant">
					<h:outputText value="#{r.idReservation}"></h:outputText>
				</p:column>

				<p:column sortBy="#{r.dateArrive}" headerText="Date d'arrivée">
					<h:outputText value="#{r.dateArrive}"></h:outputText>
				</p:column>

				<p:column sortBy="#{r.dateSortie}" headerText="Date de sortie">
					<h:outputText value="#{r.dateSortie}"></h:outputText>
				</p:column>

				<p:column sortBy="#{r.coutResa}" headerText="Coût de la réservation">
					<h:outputText value="#{r.coutResa}"></h:outputText>
				</p:column>

				<p:column sortBy="#{r.chambre.idChambre}" headerText="Chambre">
					<h:outputText value="#{r.chambre.idChambre}"></h:outputText>
				</p:column>

				<p:column sortBy="#{r.facture.idFacture}"
					headerText="Numéro de facture">
					<h:outputText value="#{r.facture.idFacture}"></h:outputText>
				</p:column>

				<p:column style="width:32px;text-align: center">
					<p:commandButton
						action="#{reservationBean.getOneReservation(r.idReservation)}"
						update=":form3:Annulation" oncomplete="PF('AnnulVar').show()"
						icon="ui-icon-close" title="Voir">
					</p:commandButton>
				</p:column>


				<f:facet name="footer">
        			Le client a effectué #{fn:length(reservationBean.listeReservations)} réservations.
    			</f:facet>

			</p:dataTable>
		</h:form>

		<h:form id="form3">
			<p:dialog header="Voulez-vous vraiment annuler ?"
				widgetVar="AnnulVar" modal="true" showEffect="fade"
				hideEffect="fade" resizable="false">
				<p:outputPanel id="Annulation" style="text-align:center;">

					<p:commandButton action="#{reservationBean.annuler}" value="Oui" icon="ui-icon-check" />

					<p:commandButton action="#{reservationBean.nePasAnnuler}" value="Non" icon="ui-icon-close" />




				</p:outputPanel>



			</p:dialog>
		</h:form>
		<br />





	</div>

	<!-- <h:outputScript name="js/jquery-1.11.1.min.js"></h:outputScript>
	<h:outputScript name="js/bootstrap.min.js"></h:outputScript>
	<h:outputScript name="js/chart.min.js"></h:outputScript>
	<h:outputScript name="js/chart-data.js"></h:outputScript>
	<h:outputScript name="js/easypiechart.js"></h:outputScript>
	<h:outputScript name="js/easypiechart-data.js"></h:outputScript>
	<h:outputScript name="js/bootstrap-datepicker.js"></h:outputScript>


	<h:outputScript name="js/lumino.glyphs.js" />
 -->
</body>
</html>